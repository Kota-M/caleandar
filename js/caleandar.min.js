var Calendar=function(model,options,date){for(var key in this.Options={Color:"",LinkColor:"",NavShow:!0,NavVertical:!1,NavLocation:"",DateTimeShow:!0,DateTimeFormat:"mmm, yyyy",DatetimeLocation:"",EventClick:null,EventTargetWholeDay:!1,DisabledDays:[],ModelChange:model,LabelsMonths:["January","February","March","April","May","June","July","August","September","October","November","December"],LabelsDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},options)this.Options[key]="string"==typeof options[key]?options[key].toLowerCase():options[key];this.Model=model||{},this.Today=new Date,this.Selected=this.Today,this.Today.Month=this.Today.getMonth(),this.Today.Year=this.Today.getFullYear(),date&&(this.Selected=date),this.Selected.Month=this.Selected.getMonth(),this.Selected.Year=this.Selected.getFullYear(),this.Selected.Days=new Date(this.Selected.Year,this.Selected.Month+1,0).getDate(),this.Selected.FirstDay=new Date(this.Selected.Year,this.Selected.Month,1).getDay(),this.Selected.LastDay=new Date(this.Selected.Year,this.Selected.Month+1,0).getDay(),this.Prev=new Date(this.Selected.Year,this.Selected.Month-1,1),0==this.Selected.Month&&(this.Prev=new Date(this.Selected.Year-1,11,1)),this.Prev.Days=new Date(this.Prev.getFullYear(),this.Prev.getMonth()+1,0).getDate()};function createCalendar(calendar,element,adjuster){if(void 0!==adjuster){adjuster=new Date(calendar.Selected.Year,calendar.Selected.Month+adjuster,1);calendar=new Calendar(calendar.Model,calendar.Options,adjuster),element.innerHTML=""}else for(var key in calendar.Options)"function"!=typeof calendar.Options[key]&&"object"!=typeof calendar.Options[key]&&calendar.Options[key]&&(element.className+=" "+key+"-"+calendar.Options[key]);var months=calendar.Options.LabelsMonths;var rwd,mainSection=document.createElement("div");function AddEventToDate(event,date,element){var eventIsInCurrentMonth,evDate;event&&event.Date&&(eventIsInCurrentMonth=(evDate=event.Date).getMonth()==date.getMonth(),date=evDate.getDate()==date.getDate(),eventIsInCurrentMonth&&date&&(element.classList.contains("eventday")||(element.className+=" eventday"),(eventIsInCurrentMonth=document.createElement("span")).className+="cld-title",date=evDate.getHours(),evDate=evDate.getMinutes(),eventIsInCurrentMonth.setAttribute("data-time",`${date<10?"0"+date:date}:`+(evDate||"00")),"function"==typeof event.Link||calendar.Options.EventClick?((date=document.createElement("a")).setAttribute("href","#"),date.innerHTML+=event.Title,calendar.Options.EventClick?(evDate=event.Link,"string"!=typeof event.Link?(date.addEventListener("click",calendar.Options.EventClick.bind.apply(calendar.Options.EventClick,[null].concat(evDate))),calendar.Options.EventTargetWholeDay&&(day.className+=" clickable",day.addEventListener("click",calendar.Options.EventClick.bind.apply(calendar.Options.EventClick,[null].concat(evDate))))):(date.addEventListener("click",calendar.Options.EventClick.bind(null,evDate)),calendar.Options.EventTargetWholeDay&&(day.className+=" clickable",day.addEventListener("click",calendar.Options.EventClick.bind(null,evDate))))):(date.addEventListener("click",event.Link),calendar.Options.EventTargetWholeDay&&(day.className+=" clickable",day.addEventListener("click",event.Link))),eventIsInCurrentMonth.appendChild(date)):eventIsInCurrentMonth.innerHTML+='<a href="'+event.Link+'">'+event.Title+"</a>",element.appendChild(eventIsInCurrentMonth)))}if(mainSection.className+="cld-main",calendar.Options.Color&&(mainSection.innerHTML+="<style>.cld-main{color:"+calendar.Options.Color+";}</style>"),calendar.Options.LinkColor&&(mainSection.innerHTML+="<style>.cld-title a{color:"+calendar.Options.LinkColor+";}</style>"),element.appendChild(mainSection),calendar.Options.NavShow&&calendar.Options.NavVertical){var adjuster=document.createElement("div"),monthList=(adjuster.className+="cld-sidebar",document.createElement("ul"));monthList.className+="cld-monthList";for(var i=0;i<months.length-3;i++){var y,x=document.createElement("li"),n=(x.className+="cld-month",i-(4-calendar.Selected.Month));n<0?n+=12:11<n&&(n-=12),0==i?(x.className+=" cld-rwd cld-nav",x.addEventListener("click",function(){"function"==typeof calendar.Options.ModelChange?calendar.Model=calendar.Options.ModelChange():calendar.Model=calendar.Options.ModelChange,createCalendar(calendar,element,-1)}),x.innerHTML+='<svg height="15" width="15" viewBox="0 0 100 75" fill="rgba(255,255,255,0.5)"><polyline points="0,75 100,75 50,0"></polyline></svg>'):i==months.length-4?(x.className+=" cld-fwd cld-nav",x.addEventListener("click",function(){"function"==typeof calendar.Options.ModelChange?calendar.Model=calendar.Options.ModelChange():calendar.Model=calendar.Options.ModelChange,createCalendar(calendar,element,1)}),x.innerHTML+='<svg height="15" width="15" viewBox="0 0 100 75" fill="rgba(255,255,255,0.5)"><polyline points="0,0 100,0 50,75"></polyline></svg>'):(x.className+=i<4?" cld-pre":4<i?" cld-post":" cld-curr",function(){var adj=i-4;x.addEventListener("click",function(){"function"==typeof calendar.Options.ModelChange?calendar.Model=calendar.Options.ModelChange():calendar.Model=calendar.Options.ModelChange,createCalendar(calendar,element,adj)}),x.setAttribute("style","opacity:"+(1-Math.abs(adj)/4)),x.innerHTML+=months[n].substr(0,3)}(),0==n&&((y=document.createElement("li")).className+="cld-year",y.innerHTML+=i<5?calendar.Selected.Year:calendar.Selected.Year+1,monthList.appendChild(y))),monthList.appendChild(x)}adjuster.appendChild(monthList),calendar.Options.NavLocation?(document.getElementById(calendar.Options.NavLocation).innerHTML="",document.getElementById(calendar.Options.NavLocation).appendChild(adjuster)):element.appendChild(adjuster)}calendar.Options.DateTimeShow&&((adjuster=document.createElement("div")).className+="cld-datetime",calendar.Options.NavShow&&!calendar.Options.NavVertical&&((rwd=document.createElement("div")).className+=" cld-rwd cld-nav",rwd.addEventListener("click",function(){createCalendar(calendar,element,-1)}),rwd.innerHTML='<svg height="15" width="15" viewBox="0 0 75 100" fill="rgba(0,0,0,0.5)"><polyline points="0,50 75,0 75,100"></polyline></svg>',adjuster.appendChild(rwd)),(rwd=document.createElement("div")).className+=" today",rwd.innerHTML=months[calendar.Selected.Month]+", "+calendar.Selected.Year,adjuster.appendChild(rwd),calendar.Options.NavShow&&!calendar.Options.NavVertical&&((rwd=document.createElement("div")).className+=" cld-fwd cld-nav",rwd.addEventListener("click",function(){createCalendar(calendar,element,1)}),rwd.innerHTML='<svg height="15" width="15" viewBox="0 0 75 100" fill="rgba(0,0,0,0.5)"><polyline points="0,0 75,50 0,100"></polyline></svg>',adjuster.appendChild(rwd)),calendar.Options.DatetimeLocation?(document.getElementById(calendar.Options.DatetimeLocation).innerHTML="",document.getElementById(calendar.Options.DatetimeLocation).appendChild(adjuster)):mainSection.appendChild(adjuster)),function(){for(var labels=document.createElement("ul"),labelsList=(labels.className="cld-labels",calendar.Options.LabelsDays),i=0;i<labelsList.length;i++){var label=document.createElement("li");label.className+="cld-label",label.innerHTML=labelsList[i],labels.appendChild(label)}mainSection.appendChild(labels)}(),function(){function DayNumber(n){var number=document.createElement("p");return number.className+="cld-number",number.innerHTML+=n,number}var days=document.createElement("ul");days.className+="cld-days";for(var i=0;i<calendar.Selected.FirstDay;i++){(day=document.createElement("li")).className+="cld-day prevMonth";for(var d=i%7,q=0;q<calendar.Options.DisabledDays.length;q++)d==calendar.Options.DisabledDays[q]&&(day.className+=" disableDay");for(var dayOfPrevMonth=calendar.Prev.Days-calendar.Selected.FirstDay+(i+1),number=DayNumber(dayOfPrevMonth),n=0;n<calendar.Model.length;n++)AddEventToDate(calendar.Model[n],new Date(calendar.Selected.Year,calendar.Selected.Month-1,dayOfPrevMonth),number);day.appendChild(number),days.appendChild(day)}for(i=0;i<calendar.Selected.Days;i++){for(d=((day=document.createElement("li")).className+="cld-day currMonth",(i+calendar.Selected.FirstDay)%7),q=0;q<calendar.Options.DisabledDays.length;q++)d==calendar.Options.DisabledDays[q]&&(day.className+=" disableDay");for(number=DayNumber(i+1),n=0;n<calendar.Model.length;n++)AddEventToDate(calendar.Model[n],new Date(calendar.Selected.Year,calendar.Selected.Month,i+1),number);day.appendChild(number),i+1==calendar.Today.getDate()&&calendar.Selected.Month==calendar.Today.Month&&calendar.Selected.Year==calendar.Today.Year&&(day.className+=" today"),days.appendChild(day)}var extraDays=13;for(35<days.children.length?extraDays=6:days.children.length<29&&(extraDays=20),i=0;i<extraDays-calendar.Selected.LastDay;i++){(day=document.createElement("li")).className+="cld-day nextMonth";for(var day,d=(i+calendar.Selected.LastDay+1)%7,q=0;q<calendar.Options.DisabledDays.length;q++)d==calendar.Options.DisabledDays[q]&&(day.className+=" disableDay");for(number=DayNumber(i+1),n=0;n<calendar.Model.length;n++)AddEventToDate(calendar.Model[n],new Date(calendar.Selected.Year,calendar.Selected.Month+1,i+1),number);day.appendChild(number),days.appendChild(day)}mainSection.appendChild(days)}()}function caleandar(el,data,settings){createCalendar(new Calendar(data,settings),el)}